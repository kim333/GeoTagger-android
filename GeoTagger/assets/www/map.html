<!Doctype html>
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0"/>

<style>
html, body {
  width:100%;
  height:100%;
  margin:0;
  padding:0;
}
</style>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAuvnD4WuYWb50K27NmHhEgMvDyUXtbXWA&sensor=true"></script>
<script>
var initialLocation;
var browserSupportFlag = new Boolean();

function initialize() {
  var mapOptions = {
    zoom: 8,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
      map.setCenter(initialLocation);
    }, function() {
      handleNoGeolocation(browserSupportFlag);
    });
  }
  
  else {
    browserSupportFlag = false;
    handleNoGeolocation(browserSupportFlag);
  }
  
  function handleNoGeolocation(errorFlag) {
    if(errorFlag == true) {
      alert("Geolocation service failed.");
      initialLocation = new google.maps.LatLng(40.698470, -73.951442);
    } else {
      alert("Your browser doesn't support geolocation. We've placed you in Siberia.");
      initialLocation = new google.maps.LatLng(60, 105);
    }
    
    map.setCenter(initialLocation);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>
<body>
<div id="map-canvas" style="margin:0 auto; width:100%; height:100%;"><!--dummy content--></div>
</body>
</html>
